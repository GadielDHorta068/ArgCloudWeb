{"ast":null,"code":"import { Subscription } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction HeaderComponent_li_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 10)(1, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_9_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.navigateLogin());\n    });\n    i0.ɵɵtext(2, \"Iniciar Sesi\\u00F3n\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 10)(1, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_10_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.navigateRegister());\n    });\n    i0.ɵɵtext(2, \"Crear Cuenta\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 12)(1, \"a\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 14)(4, \"li\")(5, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_11_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.navigateDashboard());\n    });\n    i0.ɵɵelement(6, \"i\", 16);\n    i0.ɵɵtext(7, \"Dashboard \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"li\")(9, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_11_Template_a_click_9_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.navigateVirtualMachines());\n    });\n    i0.ɵɵelement(10, \"i\", 17);\n    i0.ɵɵtext(11, \"M\\u00E1quinas Virtuales \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"li\");\n    i0.ɵɵelement(13, \"hr\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"li\")(15, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_11_Template_a_click_15_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵelement(16, \"i\", 19);\n    i0.ɵɵtext(17, \"Cerrar Sesi\\u00F3n \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r1.currentUser.firstName, \" \", ctx_r1.currentUser.lastName, \" \");\n  }\n}\n/**\n * Componente del encabezado de la aplicación.\n * Muestra los enlaces de navegación, el nombre del usuario y las opciones de sesión.\n */\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(authService, router, cdr) {\n      this.authService = authService;\n      this.router = router;\n      this.cdr = cdr;\n      /** El usuario actualmente autenticado, o null si no hay sesión activa. */\n      this.currentUser = null;\n      /** Indica si el usuario ha iniciado sesión. */\n      this.isLoggedIn = false;\n      this.userSubscription = new Subscription();\n    }\n    /**\n     * Método del ciclo de vida de Angular. Se ejecuta al inicializar el componente.\n     * Se suscribe a los cambios en el usuario actual para actualizar la vista.\n     */\n    ngOnInit() {\n      // Inicializar estado\n      this.currentUser = this.authService.getCurrentUser();\n      this.isLoggedIn = this.authService.isLoggedIn();\n      // Suscribirse a cambios\n      this.userSubscription = this.authService.currentUser$.subscribe(user => {\n        this.currentUser = user;\n        this.isLoggedIn = !!user;\n        this.cdr.detectChanges(); // Forzar detección de cambios\n      });\n    }\n    /**\n     * Método del ciclo de vida de Angular. Se ejecuta al destruir el componente.\n     * Cancela la suscripción al observable del usuario para evitar fugas de memoria.\n     */\n    ngOnDestroy() {\n      this.userSubscription.unsubscribe();\n    }\n    /** Navega a la página de inicio. */\n    navigateHome() {\n      this.router.navigate(['/']);\n    }\n    /** Navega a la página de inicio de sesión. */\n    navigateLogin() {\n      this.router.navigate(['/login']);\n    }\n    /** Navega a la página de registro. */\n    navigateRegister() {\n      this.router.navigate(['/register']);\n    }\n    /** Navega al dashboard del usuario. */\n    navigateDashboard() {\n      this.router.navigate(['/dashboard']);\n    }\n    /** Navega a la página de máquinas virtuales. */\n    navigateVirtualMachines() {\n      this.router.navigate(['/virtual-machines']);\n    }\n    /** Cierra la sesión del usuario y lo redirige a la página de inicio. */\n    logout() {\n      this.authService.logout();\n      this.router.navigate(['/']);\n    }\n    static {\n      this.ɵfac = function HeaderComponent_Factory(t) {\n        return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HeaderComponent,\n        selectors: [[\"app-header\"]],\n        decls: 12,\n        vars: 3,\n        consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-dark\", \"bg-primary\"], [1, \"container\"], [\"href\", \"#\", 1, \"navbar-brand\", 3, \"click\"], [1, \"fas\", \"fa-cloud\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#navbarNav\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarNav\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"ms-auto\"], [\"class\", \"nav-item\", 4, \"ngIf\"], [\"class\", \"nav-item dropdown\", 4, \"ngIf\"], [1, \"nav-item\"], [\"href\", \"#\", 1, \"nav-link\", 3, \"click\"], [1, \"nav-item\", \"dropdown\"], [\"href\", \"#\", \"id\", \"navbarDropdown\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", 1, \"nav-link\", \"dropdown-toggle\"], [1, \"dropdown-menu\"], [\"href\", \"#\", 1, \"dropdown-item\", 3, \"click\"], [1, \"fas\", \"fa-tachometer-alt\", \"me-2\"], [1, \"fas\", \"fa-server\", \"me-2\"], [1, \"dropdown-divider\"], [1, \"fas\", \"fa-sign-out-alt\", \"me-2\"]],\n        template: function HeaderComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"a\", 2);\n            i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_2_listener() {\n              return ctx.navigateHome();\n            });\n            i0.ɵɵelement(3, \"i\", 3);\n            i0.ɵɵtext(4, \" ArgCloud \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"button\", 4);\n            i0.ɵɵelement(6, \"span\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"div\", 6)(8, \"ul\", 7);\n            i0.ɵɵtemplate(9, HeaderComponent_li_9_Template, 3, 0, \"li\", 8)(10, HeaderComponent_li_10_Template, 3, 0, \"li\", 8)(11, HeaderComponent_li_11_Template, 18, 2, \"li\", 9);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn && ctx.currentUser);\n          }\n        },\n        dependencies: [i3.NgIf],\n        styles: [\".navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.nav-link[_ngcontent-%COMP%]{font-weight:500;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer}\"]\n      });\n    }\n  }\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}